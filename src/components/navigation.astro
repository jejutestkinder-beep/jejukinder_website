---
import waldorfLogo from '../assets/waldorf-logo.png';
---

<header class="sticky top-0 left-0 right-0 w-full max-w-full bg-white border-b border-gray-200 z-[1000] py-4 px-0 md:px-6 md:py-4 lg:px-6 lg:py-4">
	<nav class="flex items-center justify-start px-6">
		<div class="relative mr-5">
			<a href="/" class="block p-1">
				<img src={waldorfLogo.src} alt="제주 발도르프 어린이집" class="h-5 w-auto transition-opacity hover:opacity-80 md:h-[18px] lg:h-5">
			</a>
		</div>
		<div class="hidden lg:flex lg:items-center lg:gap-6 lg:flex-1">
			<div class="relative group dropdown">
				<a href="#" class="flex items-center gap-1 px-3 py-2 text-gray-800 no-underline transition-colors rounded hover:bg-gray-100 text-sm lg:text-base">어린이집 소개 <span class="text-[10px] opacity-60 transition-transform group-hover:rotate-180">▼</span></a>
				<div class="absolute top-full left-0 bg-white border border-gray-300 rounded shadow-lg min-w-[200px] opacity-0 invisible -translate-y-2.5 transition-all z-[100] group-hover:opacity-100 group-hover:visible group-hover:translate-y-0">
					<a href="/about/philosophy/" class="block px-4 py-3 text-gray-800 no-underline border-b border-gray-100 last:border-b-0 hover:bg-gray-50">운영 철학</a>
					<a href="/about/status/" class="block px-4 py-3 text-gray-800 no-underline border-b border-gray-100 last:border-b-0 hover:bg-gray-50">현황</a>
                    <a href="/about/faq/" class="block px-4 py-3 text-gray-800 no-underline border-b border-gray-100 last:border-b-0 hover:bg-gray-50">자주 묻는 질문</a>
                    <a href="/about/testimonial/" class="block px-4 py-3 text-gray-800 no-underline border-b border-gray-100 last:border-b-0 hover:bg-gray-50">자주 묻는 질문</a>


				</div>
			</div>
			<div class="relative group dropdown">
				<a href="#" class="flex items-center gap-1 px-3 py-2 text-gray-800 no-underline transition-colors rounded hover:bg-gray-100 text-sm lg:text-base">발도르프란? <span class="text-[10px] opacity-60 transition-transform group-hover:rotate-180">▼</span></a>
				<div class="absolute top-full left-0 bg-white border border-gray-300 rounded shadow-lg min-w-[200px] opacity-0 invisible -translate-y-2.5 transition-all z-[100] group-hover:opacity-100 group-hover:visible group-hover:translate-y-0">
					<a href="/waldorf/education/" class="block px-4 py-3 text-gray-800 no-underline border-b border-gray-100 last:border-b-0 hover:bg-gray-50">발도르프 유아 교육</a>
					<a href="/waldorf/rhythm/" class="block px-4 py-3 text-gray-800 no-underline border-b border-gray-100 last:border-b-0 hover:bg-gray-50">어린이집 리듬 생활</a>
				</div>
			</div>
			<div class="relative group dropdown">
				<a href="#" class="flex items-center gap-1 px-3 py-2 text-gray-800 no-underline transition-colors rounded hover:bg-gray-100 text-sm lg:text-base">어린이집 소식 <span class="text-[10px] opacity-60 transition-transform group-hover:rotate-180">▼</span></a>
				<div class="absolute top-full left-0 bg-white border border-gray-300 rounded shadow-lg min-w-[200px] opacity-0 invisible -translate-y-2.5 transition-all z-[100] group-hover:opacity-100 group-hover:visible group-hover:translate-y-0">
					<a href="/notices/" class="block px-4 py-3 text-gray-800 no-underline border-b border-gray-100 last:border-b-0 hover:bg-gray-50">공지 사항</a>
					<a href="/board/" class="block px-4 py-3 text-gray-800 no-underline border-b border-gray-100 last:border-b-0 hover:bg-gray-50">어린이집 이야기</a>
				</div>
			</div>
			<div class="relative group dropdown">
				<a href="#" class="flex items-center gap-1 px-3 py-2 text-gray-800 no-underline transition-colors rounded hover:bg-gray-100 text-sm lg:text-base">문의하기 <span class="text-[10px] opacity-60 transition-transform group-hover:rotate-180">▼</span></a>
				<div class="absolute top-full left-0 bg-white border border-gray-300 rounded shadow-lg min-w-[200px] opacity-0 invisible -translate-y-2.5 transition-all z-[100] group-hover:opacity-100 group-hover:visible group-hover:translate-y-0">
					<a href="https://docs.google.com/forms/d/e/1FAIpQLSccyRwbI42sdBHoiWLcz7A-BywQAY7I7ce_NVQUo6puvjFsVA/viewform?usp=header" target="_blank" rel="noopener noreferrer" class="block px-4 py-3 text-gray-800 no-underline border-b border-gray-100 last:border-b-0 hover:bg-gray-50">입학 상담 신청</a>
					<a href="/contact/" class="block px-4 py-3 text-gray-800 no-underline border-b border-gray-100 last:border-b-0 hover:bg-gray-50">문의하기</a>
				</div>
			</div>
		</div>
		<button class="relative flex lg:hidden w-8 h-8 bg-transparent border-0 cursor-pointer p-2 ml-auto items-center justify-center mobile-menu-toggle" aria-label="메뉴">
			<span class="absolute left-1/2 top-2.5 w-[25px] h-0.5 bg-gray-800 rounded transition-all origin-center -translate-x-1/2 mobile-menu-line"></span>
			<span class="absolute left-1/2 top-1/2 w-[25px] h-0.5 bg-gray-800 rounded transition-all origin-center -translate-x-1/2 -translate-y-1/2 mobile-menu-line"></span>
			<span class="absolute left-1/2 bottom-2.5 w-[25px] h-0.5 bg-gray-800 rounded transition-all origin-center -translate-x-1/2 mobile-menu-line"></span>
		</button>
	</nav>
	<div class="lg:hidden fixed top-0 -left-full w-[280px] md:w-[280px] sm:w-[260px] h-screen bg-white shadow-lg z-[1000] pt-20 pb-5 overflow-y-auto transition-[left] duration-300 ease-in-out mobile-nav">
		<div class="border-b border-gray-100 mobile-nav-item">
			<a href="#" class="block px-6 py-4 text-gray-800 no-underline text-base relative">어린이집 소개</a>
			<div class="max-h-0 overflow-hidden bg-gray-50 transition-[max-height] duration-300 ease-in-out mobile-submenu">
				<a href="/about/philosophy/" class="block px-12 py-3 text-gray-600 no-underline text-sm">운영 철학</a>
				<a href="/about/status/" class="block px-12 py-3 text-gray-600 no-underline text-sm">현황</a>
			</div>
		</div>
		<div class="border-b border-gray-100 mobile-nav-item">
			<a href="#" class="block px-6 py-4 text-gray-800 no-underline text-base relative">발도르프란?</a>
			<div class="max-h-0 overflow-hidden bg-gray-50 transition-[max-height] duration-300 ease-in-out mobile-submenu">
				<a href="/waldorf/education/" class="block px-12 py-3 text-gray-600 no-underline text-sm">발도르프 유아 교육</a>
				<a href="/waldorf/rhythm/" class="block px-12 py-3 text-gray-600 no-underline text-sm">어린이집 리듬 생활</a>
			</div>
		</div>
		<div class="border-b border-gray-100 mobile-nav-item">
			<a href="#" class="block px-6 py-4 text-gray-800 no-underline text-base relative">게시판</a>
			<div class="max-h-0 overflow-hidden bg-gray-50 transition-[max-height] duration-300 ease-in-out mobile-submenu">
				<a href="/notices/" class="block px-12 py-3 text-gray-600 no-underline text-sm">공지사항</a>
				<a href="/board/" class="block px-12 py-3 text-gray-600 no-underline text-sm">새소식</a>
			</div>
		</div>
		<div class="border-b border-gray-100 mobile-nav-item">
			<a href="#" class="block px-6 py-4 text-gray-800 no-underline text-base relative">문의하기</a>
			<div class="max-h-0 overflow-hidden bg-gray-50 transition-[max-height] duration-300 ease-in-out mobile-submenu">
				<a href="https://docs.google.com/forms/d/e/1FAIpQLSccyRwbI42sdBHoiWLcz7A-BywQAY7I7ce_NVQUo6puvjFsVA/viewform?usp=header" target="_blank" rel="noopener noreferrer" class="block px-12 py-3 text-gray-600 no-underline text-sm">입학 상담 신청</a>
				<a href="/contact/" class="block px-12 py-3 text-gray-600 no-underline text-sm">문의하기</a>
			</div>
		</div>
	</div>
</header>
<div class="lg:hidden fixed inset-0 bg-black/50 z-[999] mobile-backdrop hidden"></div>

<script>
	// Mobile menu functionality
	const mobileToggle = document.querySelector('.mobile-menu-toggle');
	const mobileNav = document.querySelector('.mobile-nav');
	const mobileBackdrop = document.querySelector('.mobile-backdrop');
	const mobileNavItems = document.querySelectorAll('.mobile-nav-item:not(.no-submenu)');

	function toggleMobileMenu() {
		mobileToggle.classList.toggle('active');
		mobileNav.classList.toggle('active');
		mobileBackdrop.classList.toggle('active');
		document.body.style.overflow = mobileNav.classList.contains('active') ? 'hidden' : '';
	}

	function closeMobileMenu() {
		mobileToggle.classList.remove('active');
		mobileNav.classList.remove('active');
		mobileBackdrop.classList.remove('active');
		document.body.style.overflow = '';
	}

	mobileToggle.addEventListener('click', toggleMobileMenu);
	mobileBackdrop.addEventListener('click', closeMobileMenu);

	// Handle submenu toggles
	mobileNavItems.forEach(item => {
		const link = item.querySelector('a');
		link.addEventListener('click', (e) => {
			e.preventDefault();
			item.classList.toggle('active');
		});
	});

	// Close menu when clicking on submenu links
	document.querySelectorAll('.mobile-submenu a').forEach(link => {
		link.addEventListener('click', closeMobileMenu);
	});

	// Close menu when clicking on no-submenu items
	document.querySelectorAll('.mobile-nav-item.no-submenu a').forEach(link => {
		link.addEventListener('click', closeMobileMenu);
	});
</script>

<style>
	/* Mobile menu toggle X animation */
	.mobile-menu-toggle.active .mobile-menu-line:nth-child(1) {
		top: 50%;
		transform: translateX(-50%) translateY(-50%) rotate(45deg);
	}

	.mobile-menu-toggle.active .mobile-menu-line:nth-child(2) {
		opacity: 0;
	}

	.mobile-menu-toggle.active .mobile-menu-line:nth-child(3) {
		bottom: auto;
		top: 50%;
		transform: translateX(-50%) translateY(-50%) rotate(-45deg);
	}

	/* Mobile navigation slide animation */
	.mobile-nav.active {
		left: 0;
	}

	/* Mobile nav item dropdown icon */
	.mobile-nav-item > a::after {
		content: '▼';
		position: absolute;
		right: 24px;
		font-size: 12px;
		transition: transform 0.2s;
	}

	.mobile-nav-item.no-submenu > a::after {
		display: none;
	}

	.mobile-nav-item.active > a::after {
		transform: rotate(180deg);
	}

	/* Mobile submenu expand animation */
	.mobile-nav-item.active .mobile-submenu {
		max-height: 200px;
	}

	/* Backdrop */
	.mobile-backdrop.active {
		display: block;
	}
</style>
