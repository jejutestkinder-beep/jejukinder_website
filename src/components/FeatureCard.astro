---
import { Icon } from 'astro-icon/components';

interface Props {
  image?: ImageMetadata;
  icon?: string;
  title: string;
  description?: string;
  imageAlt?: string;
  titleTag?: 'h3' | 'h4' | 'h5';
  imageSize?: 'large' | 'small';
  cardType?: 'default' | 'image' | 'vertical';
}

const { image, icon, title, description, imageAlt = title, titleTag = 'h5', imageSize = 'large', cardType = 'default' } = Astro.props;
const TitleTag = titleTag;

const imageSizeClass = imageSize === 'small' 
  ? 'w-16 h-16 md:w-20 md:h-20' 
  : 'w-32 h-32 md:w-40 md:h-40';

const iconSizeClass = imageSize === 'small'
  ? 'w-6 h-6 md:w-8 md:h-8'
  : 'w-12 h-12 md:w-14 md:h-14';
---

{cardType === 'image' ? (
  <div class="w-full">
    {image ? (
      <div class="w-full aspect-[4/3] rounded-xl overflow-hidden mb-4">
        <img src={image.src} alt={imageAlt} class="w-full h-full object-cover" />
      </div>
    ) : icon && (
      <div class="w-full aspect-[4/3] rounded-xl bg-white flex items-center justify-center mb-4 text-custom-rose">
        <Icon name={icon} class="w-16 h-16 md:w-20 md:h-20" />
      </div>
    )}
    <TitleTag>{title}</TitleTag>
  </div>
) : cardType === 'vertical' ? (
  <div class="w-full">
    {image ? (
      <div class="w-full aspect-[4/3] md:aspect-[3/2] rounded-xl overflow-hidden mb-6">
        <img src={image.src} alt={imageAlt} class="w-full h-full object-cover" />
      </div>
    ) : icon && (
      <div class="w-full aspect-[4/3] md:aspect-[3/2] rounded-xl bg-white flex items-center justify-center mb-6 text-custom-rose">
        <Icon name={icon} class="w-16 h-16 md:w-20 md:h-20" />
      </div>
    )}
    <div>
      <TitleTag class="mb-3">{title}</TitleTag>
      {description && <p set:html={description} />}
    </div>
  </div>
) : (
  <div class="flex gap-6 items-start">
    {image ? (
      <div class={`${imageSizeClass} flex-shrink-0 bg-gray-100 rounded-xl overflow-hidden`}>
        <img src={image.src} alt={imageAlt} class="w-full h-full object-cover" />
      </div>
    ) : icon && (
      <div class={`${imageSizeClass} flex-shrink-0 bg-white rounded-xl flex items-center justify-center text-custom-rose`}>
        <Icon name={icon} class={iconSizeClass} />
      </div>
    )}
    <div class="flex-1">
      <TitleTag class="mb-3">{title}</TitleTag>
      {description && <p set:html={description} />}
    </div>
  </div>
)}

