---
import Layout from '../../layouts/Layout.astro';
import PostList from '../../components/PostList.astro';
import { getCollection } from 'astro:content';
import type { Page } from 'astro';

export async function getStaticPaths({ paginate }) {
  const posts = await getCollection('board');

  // 최신순 정렬
  posts.sort((a, b) => {
    const ad = a.data.date ? new Date(a.data.date).getTime() : 0;
    const bd = b.data.date ? new Date(b.data.date).getTime() : 0;
    return bd - ad;
  });

  return paginate(posts, { pageSize: 15 });
}

const { page } = Astro.props;
---

<Layout title="게시판 - 제주 발도르프 킨더">
  <PostList title="게시판" items={page.data} type="board" page={page} />
</Layout>
