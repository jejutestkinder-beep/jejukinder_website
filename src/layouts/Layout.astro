---
import Navigation from '../components/navigation.astro';
import Footer from '../components/footer.astro';
import Seo from '../components/Seo.astro';
import '../styles/global.css';

interface Props {
  title?: string;
  description?: string;
  canonical?: string;
  openGraph?: {
    title?: string;
    description?: string;
    image?: string;
    url?: string;
    type?: string;
  };
  twitterCard?: {
    title?: string;
    description?: string;
    image?: string;
    card?: 'summary' | 'summary_large_image';
  };
}

const { 
  title = 'Ï†úÏ£º Î∞úÎèÑÎ•¥ÌîÑ ÌÇ®Îçî',
  description = 'Ï†úÏ£º Î∞úÎèÑÎ•¥ÌîÑ Ïñ¥Î¶∞Ïù¥Ïßë',
  canonical,
  openGraph,
  twitterCard
} = Astro.props;
---

<!doctype html>
<html lang="ko">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üê•</text></svg>" />
		<meta name="generator" content={Astro.generator} />

		<!-- Google Fonts -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link href="https://fonts.googleapis.com/css2?family=Gaegu:wght@400;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet" />

		<Seo
			title={title}
			description={description}
			canonical={canonical}
			openGraph={openGraph}
			twitterCard={twitterCard}
		/>
	</head>

	<body>
		<Navigation />

		<main>
			<slot />
		</main>

		<Footer />
		<script is:inline>
			(function () {
				const hash = window.location.hash || "";
				const hasToken =
					hash.includes("invite_token=") ||
					hash.includes("recovery_token=") ||
					hash.includes("confirmation_token=");

				if (hasToken && !window.location.pathname.startsWith("/admin/")) {
					window.location.href = "/admin/" + hash;
				}
			})();
		</script>
	</body>
</html>

<style>
	html {
		margin: 0;
		width: 100%;
		height: 100%;
		overflow-x: hidden;
	}

	body {
		margin: 0;
		width: 100%;
		min-height: 100vh;
		font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
		display: flex;
		flex-direction: column;
		overflow-x: hidden;
	}

	main {
		flex: 1;
		padding: 32px 24px;
	}

	/* Responsive Breakpoints */
	@media (max-width: 1024px) {
		main {
			padding: 24px 16px;
		}
	}

	@media (max-width: 768px) {
		main {
			padding: 20px 12px;
		}
	}

	@media (max-width: 480px) {
		main {
			padding: 16px 8px;
		}
	}
</style>